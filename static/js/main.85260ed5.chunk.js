(this.webpackJsonpdemo=this.webpackJsonpdemo||[]).push([[0],{35:function(e,t,a){},36:function(e,t,a){},47:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(12),l=a.n(s),i=(a(34),a(35),a(36),a(5)),o=a(7),r=a(13),d={isLoggedIn:!1,isAdmin:!1,email:null,token:null};localStorage.token&&(d.isLoggedIn=!0,d.isAdmin="false"!=localStorage.isAdmin,d.email=localStorage.email,d.token=localStorage.token);var b=Object(r.b)({name:"login",initialState:d,reducers:{login:function(e,t){e.isLoggedIn=!0,e.isAdmin=t.payload.isAdmin,e.email=t.payload.email,e.token=t.payload.token,localStorage.setItem("token",t.payload.token),localStorage.setItem("email",t.payload.email),localStorage.setItem("isAdmin",t.payload.isAdmin)},logout:function(e){e.isLoggedIn=!1,e.token=null,localStorage.removeItem("token"),localStorage.removeItem("email"),localStorage.removeItem("isAdmin")}}}),j=b.actions,m=j.login,u=j.logout,O=b.reducer,h=a(1),x=function(){var e=Object(o.c)((function(e){return e.user})),t=Object(o.b)();return Object(h.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(h.jsxs)("div",{className:"container-fluid",children:[Object(h.jsx)(i.c,{className:"navbar-brand",to:"/",children:"Navbar"}),Object(h.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:[Object(h.jsxs)("ul",{className:"navbar-nav",children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(i.c,{className:"nav-link",to:"/",children:"Home"})}),!e.isLoggedIn&&Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(i.c,{className:"nav-link",to:"/login",children:"Login"})}),e.isLoggedIn&&Object(h.jsx)("li",{className:"nav-item ml-auto",children:Object(h.jsx)(i.c,{className:"nav-link",to:"/posts",children:"Posts"})})]}),e.isLoggedIn&&Object(h.jsx)("ul",{className:"navbar-nav ms-auto",children:Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsxs)("button",{className:"btn btn-success",onClick:function(){return t(u())},children:["LogOut - ",e.email]})})})]})]})})},g=a(2),p=function(){return Object(h.jsx)("h3",{className:"text-center py-5",children:"Welcome Page"})},f=(a(47),a(29)),v=a.n(f),N=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={};e&&(t.Authorization="Bearer ".concat(localStorage.getItem("token")));var a=v.a.create({baseURL:"https://jsonplaceholder.typicode.com",headers:t});return a},y=function(){var e=Object(o.b)();return Object(h.jsx)("div",{className:"login-page",children:Object(h.jsxs)("form",{onSubmit:function(t){t.preventDefault();var a=new FormData(t.target);a.get("email"),a.get("password");e(m({isAdmin:!0,email:"test@gmail.com",token:"my token"}))},children:[Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("label",{className:"form-label",children:"Email address"}),Object(h.jsx)("input",{type:"email",required:!0,className:"form-control",name:"email",defaultValue:"test@gmail.com"})]}),Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("label",{className:"form-label",children:"Password"}),Object(h.jsx)("input",{type:"password",required:!0,className:"form-control",name:"password",defaultValue:"test"})]}),Object(h.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})})},k=a(14),S=function(){return N().get("/posts?_limit=5")},I=(a(66),function(){var e=Object(o.c)((function(e){return e.user})),t=Object(n.useState)([]),a=Object(k.a)(t,2),c=a[0],s=a[1];Object(n.useEffect)((function(){S().then((function(e){var t=e.data;s(t)}))}),[]);var l=function(t){var a;e.isAdmin&&(a=t,N(!0).delete("/posts/".concat(a))).then((function(e){S().then((function(e){var t=e.data;s(t)}))}))};return Object(h.jsxs)("div",{className:"posts",children:[Object(h.jsx)("h3",{className:"text-center mb-5",children:"All Posts"}),Object(h.jsx)(i.b,{to:"/newpost",className:"btn btn-success",children:"Add New Post"}),c.length>0&&Object(h.jsx)("ul",{className:"posts",children:c.map((function(t){return Object(h.jsxs)("li",{children:[Object(h.jsx)("h4",{children:t.title}),Object(h.jsx)("p",{children:t.body}),e.isAdmin&&Object(h.jsx)(i.b,{to:"/editpost/".concat(t.id),className:"btn btn-primary",children:"Edit"}),e.isAdmin&&Object(h.jsx)("button",{className:"btn btn-danger ms-2",onClick:function(){l(t.id)},children:"Delete"})]},t.id)}))})]})}),A=function(){var e=Object(g.h)().id,t=Object(g.g)(),a=Object(n.useState)(),c=Object(k.a)(a,2),s=c[0],l=c[1];Object(n.useEffect)((function(){(function(e){return N().get("/posts/".concat(e))})(e).then((function(e){l(e.data)}))}),[e]);return Object(h.jsx)("div",{className:"editPost",children:void 0!==s&&Object(h.jsxs)("form",{onSubmit:function(a){a.preventDefault();var n=new FormData(a.target),c={id:e,title:n.get("title"),body:n.get("body")};(function(e,t){return N(!0).put("/posts/".concat(e),t)})(e,c).then((function(){alert("Updated Successfully!"),t.replace("/")})).catch((function(e){console.log(e)}))},children:[Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("label",{className:"form-label",children:"Email address"}),Object(h.jsx)("input",{type:"text",required:!0,className:"form-control",name:"title",defaultValue:s.title})]}),Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("label",{className:"form-label",children:"Password"}),Object(h.jsx)("textarea",{rows:"5",required:!0,className:"form-control",name:"body",defaultValue:s.body})]}),Object(h.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Update"}),Object(h.jsx)(i.b,{to:"/posts",className:"btn btn-success ms-2",children:"Cancel"})]})})},L=function(){var e=Object(o.c)((function(e){return e.user}));return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(x,{}),Object(h.jsx)("div",{className:"container py-5",children:Object(h.jsxs)(g.d,{children:[Object(h.jsx)(g.b,{path:"/",exact:!0,children:Object(h.jsx)(p,{})}),Object(h.jsx)(g.b,{path:"/login",children:e.isLoggedIn?Object(h.jsx)(g.a,{to:"/"}):Object(h.jsx)(y,{})}),Object(h.jsx)(g.b,{path:"/posts",children:e.isLoggedIn?Object(h.jsx)(I,{}):Object(h.jsx)(g.a,{to:"/"})}),Object(h.jsx)(g.b,{path:"/editpost/:id",children:e.isLoggedIn&&e.isAdmin?Object(h.jsx)(A,{}):Object(h.jsx)(g.a,{to:"/"})})]})})]})},w=Object(r.a)({reducer:{user:O}});l.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsxs)(i.a,{children:[Object(h.jsx)(o.a,{store:w,children:Object(h.jsx)(L,{})}),","]})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.85260ed5.chunk.js.map